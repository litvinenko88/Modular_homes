(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[741],{8915:function(e,i,t){"use strict";t.d(i,{Z:function(){return n}});var o=t(5893),s=t(7294),l=t(5841),a=t.n(l);function n(e){let{showAllVideos:i=!1,showViewAllButton:t=!1}=e,[l,n]=(0,s.useState)(!1),[r,d]=(0,s.useState)(null),[c,v]=(0,s.useState)({}),[u,_]=(0,s.useState)({}),[m,p]=(0,s.useState)({}),h=(0,s.useRef)([]),w=(0,s.useRef)([]),x=[{video:"/video/1.mp4",audio:"/audio/1.1.mp4",title:"Обзор дома 1"},{video:"/video/2.mp4",audio:"/audio/2.1.mp4",title:"Обзор дома 2"},{video:"/video/3.mp4",audio:"/audio/3.1.mp4",title:"Обзор дома 3"},{video:"/video/4.mp4",audio:"/audio/4.1.mp4",title:"Обзор дома 4"}],R=i?[...x,{video:"/video/5.mp4",audio:"/audio/5.1.mp4",title:"Обзор дома 5"},{video:"/video/6.mp4",audio:"/audio/6.1.mp4",title:"Обзор дома 6"},{video:"/video/7.mp4",audio:"/audio/7.1.mp4",title:"Обзор дома 7"},{video:"/video/8.mp4",title:"Обзор дома 8"},{video:"/video/9.mp4",audio:"/audio/9.1.mp4",title:"Обзор дома 9"},{video:"/video/10.mp4",audio:"/audio/10.1.mp4",title:"Обзор дома 10"},{video:"/video/11.mp4",title:"Обзор дома 11"},{video:"/video/12.mp4",title:"Обзор дома 12"},{video:"/video/13.mp4",title:"Обзор дома 13"},{video:"/video/14.mp4",title:"Обзор дома 14"},{video:"/video/15.mp4",title:"Обзор дома 15"},{video:"/video/16.mp4",title:"Обзор дома 16"}]:x;(0,s.useEffect)(()=>{{let e=new IntersectionObserver(e=>{let[i]=e;i.isIntersecting&&n(!0)},{threshold:.3}),i=document.querySelector(".".concat(a().videoReviews));return i&&e.observe(i),()=>e.disconnect()}},[]);let j=e=>{let i=h.current[e],t=w.current[e];c[e]?(null==i||i.pause(),null==t||t.pause()):(Object.keys(c).forEach(i=>{if(i!==String(e)&&c[i]){var t,o;null===(t=h.current[i])||void 0===t||t.pause(),null===(o=w.current[i])||void 0===o||o.pause()}}),null==i||i.play().catch(e=>{console.error("Video playback failed:",e)}),t&&R[e].audio&&(t.currentTime=i.currentTime,null==t||t.play().catch(e=>{console.error("Audio playback failed:",e)})))},g=e=>{v(i=>({...i,[e]:!0})),d(e)},f=e=>{v(i=>({...i,[e]:!1})),r===e&&d(null)},N=e=>{let i=h.current[e];i&&_(t=>({...t,[e]:i.currentTime}))},V=e=>{let i=h.current[e];i&&i.duration&&p(t=>({...t,[e]:i.duration}))},y=e=>{let i=h.current[e];i&&i.duration&&!m[e]&&p(t=>({...t,[e]:i.duration}))},b=(e,i)=>{let t=h.current[e],o=w.current[e];if(t){let s=Math.max(0,Math.min(i,t.duration||0));t.currentTime=s,o&&R[e].audio&&(o.currentTime=s),_(i=>({...i,[e]:s}))}},C=(e,i)=>{let t=h.current[e];if(!t)return;let o=i.currentTarget.getBoundingClientRect(),s=i.clientX-o.left,l=o.width,a=t.duration||0;a>0&&b(e,Math.max(0,Math.min(s/l*a,a)))},k=e=>e?"".concat(Math.floor(e/60),":").concat(Math.floor(e%60).toString().padStart(2,"0")):"0:00",B=e=>{var i;let t=null===(i=h.current[e])||void 0===i?void 0:i.parentElement;t&&(document.fullscreenElement?document.exitFullscreen():t.requestFullscreen().catch(e=>{console.log("Error attempting to enable fullscreen:",e)}))};return(0,o.jsxs)("section",{className:a().videoReviews,"aria-labelledby":"video-reviews-title",children:[(0,o.jsxs)("div",{className:a().animatedBackground,children:[(0,o.jsx)("div",{className:a().particle}),(0,o.jsx)("div",{className:a().particle}),(0,o.jsx)("div",{className:a().particle}),(0,o.jsx)("div",{className:a().particle}),(0,o.jsx)("div",{className:a().wave}),(0,o.jsx)("div",{className:a().wave}),(0,o.jsx)("div",{className:a().star}),(0,o.jsx)("div",{className:a().star}),(0,o.jsx)("div",{className:a().star}),(0,o.jsx)("div",{className:a().pulseRing})]}),(0,o.jsx)("div",{className:a().backgroundImage}),(0,o.jsx)("div",{className:a().container,children:(0,o.jsxs)("div",{className:"".concat(a().content," ").concat(l?a().visible:""),children:[(0,o.jsx)("h2",{id:"video-reviews-title",className:a().title,children:"Видеообзоры наших домов"}),(0,o.jsx)("p",{className:a().description,children:"Убедитесь в качестве и продуманности каждой детали"}),(0,o.jsx)("div",{className:a().videoGrid,children:R.map((e,i)=>{var t;return(0,o.jsx)("div",{className:a().videoItem,children:(0,o.jsxs)("div",{className:a().videoContainer,children:[(0,o.jsx)("video",{ref:e=>h.current[i]=e,src:e.video,muted:!0,preload:"metadata",onPlay:()=>g(i),onPause:()=>f(i),onTimeUpdate:()=>N(i),onLoadedMetadata:()=>V(i),onCanPlay:()=>y(i),onDurationChange:()=>V(i),className:a().video,"aria-label":"Видеообзор модульного дома ".concat(i+1),title:e.title}),e.audio&&(0,o.jsx)("audio",{ref:e=>w.current[i]=e,src:e.audio,preload:"metadata"}),!c[i]&&(0,o.jsx)("div",{className:a().centerPlayButton,children:(0,o.jsx)("button",{className:a().centerPlay,onClick:()=>j(i),children:(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:(0,o.jsx)("polygon",{points:"8,5 19,12 8,19",fill:"currentColor"})})})}),(0,o.jsxs)("div",{className:a().customControls,children:[(0,o.jsx)("button",{className:a().playButton,onClick:()=>j(i),children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:c[i]?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"}),(0,o.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"})]}):(0,o.jsx)("polygon",{points:"5,3 19,12 5,21",fill:"currentColor"})})}),(0,o.jsx)("div",{className:a().progressContainer,children:(0,o.jsxs)("div",{className:a().progressTrack,onClick:e=>C(i,e),children:[(0,o.jsx)("div",{className:a().progressFill,style:{width:"".concat((()=>{let e=h.current[i];return(null==e?void 0:e.duration)?(u[i]||0)/e.duration*100:0})(),"%")}}),(0,o.jsx)("div",{className:a().progressThumb,style:{left:"".concat((()=>{let e=h.current[i];return(null==e?void 0:e.duration)?(u[i]||0)/e.duration*100:0})(),"%")}})]})}),(0,o.jsxs)("div",{className:a().timeDisplay,children:[k(u[i])," / ",k(null===(t=h.current[i])||void 0===t?void 0:t.duration)]}),(0,o.jsx)("button",{className:a().fullscreenButton,onClick:()=>B(i),title:"Полный экран",children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:(0,o.jsx)("path",{d:"M7 14H5v5h5v-2H7v-3zM5 10h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z",fill:"currentColor"})})})]})]})},i)})}),t&&(0,o.jsx)("div",{className:a().buttonContainer,children:(0,o.jsx)("a",{href:"/otzyvy",className:a().viewAllButton,children:"Смотреть все обзоры"})})]})})]})}},5841:function(e){e.exports={videoReviews:"VideoReviews_videoReviews__dbHnO",animatedBackground:"VideoReviews_animatedBackground__HtPat",particle:"VideoReviews_particle__yD9kp",float:"VideoReviews_float__xWf7i",wave:"VideoReviews_wave__sbXzy",ripple:"VideoReviews_ripple__7Dl4e",star:"VideoReviews_star__KPLSJ",twinkle:"VideoReviews_twinkle__KZKe_",pulseRing:"VideoReviews_pulseRing__wnomC",pulse:"VideoReviews_pulse__8VfM5",backgroundImage:"VideoReviews_backgroundImage__TAdfV",container:"VideoReviews_container__LRwtR",content:"VideoReviews_content__7nDjl",visible:"VideoReviews_visible__P8NFw",title:"VideoReviews_title__91jYF",description:"VideoReviews_description__ajdT2",videoGrid:"VideoReviews_videoGrid__x1bSx",videoItem:"VideoReviews_videoItem__7n8KH",videoContainer:"VideoReviews_videoContainer___i41S",video:"VideoReviews_video__U3_uP",customControls:"VideoReviews_customControls__6vPKG",playButton:"VideoReviews_playButton__ikacW",fullscreenButton:"VideoReviews_fullscreenButton__xlPuf",progressContainer:"VideoReviews_progressContainer__QSv_c",progressTrack:"VideoReviews_progressTrack__CxkIR",progressFill:"VideoReviews_progressFill__N_XhK",progressThumb:"VideoReviews_progressThumb__imU_E",timeDisplay:"VideoReviews_timeDisplay__GP5Xa",centerPlayButton:"VideoReviews_centerPlayButton__N1Nw6",centerPlay:"VideoReviews_centerPlay__tIX5R",videoTitle:"VideoReviews_videoTitle__TDcgs",buttonContainer:"VideoReviews_buttonContainer__ORpFf",viewAllButton:"VideoReviews_viewAllButton__hah3O"}},1163:function(e,i,t){e.exports=t(3079)}}]);